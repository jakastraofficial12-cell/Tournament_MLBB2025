<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tournament MLBB 2025 - SEASON II</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* === KUSTOM BACKGROUND GAMBAR BARU === */
            background-image: url('attack_on_titan_x_mlbb_event_poster__full_hd__by_quan171098_dgs062o-pre.jpg');
            background-size: cover; /* Pastikan gambar menutupi seluruh viewport */
            background-repeat: no-repeat;
            background-position: center center;
            background-attachment: fixed; /* Gambar tetap diam saat discroll */
            position: relative; /* Penting untuk overlay */
            color: white;
        }

        /* Overlay gelap untuk memastikan teks putih tetap kontras */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75); /* Lapisan hitam 75% transparan */
            z-index: -1; /* Taruh di belakang konten */
        }
        /* ===================================== */

        /* Custom scrollbar for better look in dark mode */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937; /* bg-gray-800 */
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563; /* bg-gray-600 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280; /* bg-gray-500 */
        }
        /* Gaya untuk Modal (popup kustom) */
        .modal-overlay {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s, visibility 0.3s;
        }
        .modal-overlay.open {
            visibility: visible;
            opacity: 1;
        }
        .modal-content-container {
            max-height: 80vh; /* Batasi tinggi modal */
            overflow-y: auto; /* Aktifkan scroll jika konten terlalu panjang */
        }
        /* Style kustom untuk kotak pertandingan di Playoffs */
        .match-box {
            background-color: #1f2937; /* bg-gray-800 */
            border: 1px solid #374151; /* border-gray-700 */
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .match-team {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 0;
            font-weight: 600;
        }
        .match-score {
            font-weight: 700;
            color: #f87171; /* text-red-400 */
        }
        /* Styling untuk logo tim placeholder */
        .team-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #374151; /* bg-gray-700 */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 700;
            color: #9ca3af; /* text-gray-400 */
            flex-shrink: 0;
            margin-right: 12px;
        }
        
        /* === Gaya Kustom untuk Super Match === */
        .super-match-card {
            /* Warna latar belakang dramatis */
            background: linear-gradient(135deg, #1f2937, #374151); /* Dark gradient */
            border: 3px solid #fcd34d; /* Border kuning emas */
            box-shadow: 0 10px 15px -3px rgba(252, 211, 77, 0.5), 0 4px 6px -4px rgba(252, 211, 77, 0.5); /* Glowing shadow */
        }
        .team-box-champion {
            background-color: rgba(255, 255, 255, 0.05); /* Latar belakang tim transparan */
            border: 1px solid rgba(252, 211, 77, 0.5); /* Border emas tipis */
        }
        /* ===================================== */
    </style>
</head>
<body class="text-white min-h-screen p-4 md:p-8 flex flex-col">

    <div class="max-w-7xl mx-auto flex-grow w-full">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-extrabold text-red-500 tracking-wider">
                TOURNAMENT MLBB
            </h1>
            <p class="text-xl md:text-2xl font-semibold text-gray-400 mt-1" id="current-phase-title">
                2025 SEASON II - Utama
            </p>
        </header>
        
        <!-- Tab Navigasi Utama -->
        <div class="flex justify-center mb-8 space-x-2 md:space-x-4 flex-wrap">
            <button id="tab-home" onclick="setActivePhase('Utama')" class="px-3 md:px-6 py-2 rounded-lg font-bold transition duration-200 border-2 border-red-600 bg-red-600 text-white shadow-lg hover:bg-red-700 text-sm md:text-base mb-2">
                Utama
            </button>
            <button id="tab-teams" onclick="setActivePhase('Tim')" class="px-3 md:px-6 py-2 rounded-lg font-bold transition duration-200 border-2 border-gray-600 bg-gray-800 text-gray-300 shadow-lg hover:bg-gray-700 hover:text-white text-sm md:text-base mb-2">
                Tim
            </button>
            <button id="tab-grup" onclick="setActivePhase('Fase Grup')" class="px-3 md:px-6 py-2 rounded-lg font-bold transition duration-200 border-2 border-gray-600 bg-gray-800 text-gray-300 shadow-lg hover:bg-gray-700 hover:text-white text-sm md:text-base mb-2">
                Fase Grup
            </button>
            <button id="tab-playoffs" onclick="setActivePhase('Fase Playoffs')" class="px-3 md:px-6 py-2 rounded-lg font-bold transition duration-200 border-2 border-gray-600 bg-gray-800 text-gray-300 shadow-lg hover:bg-gray-700 hover:text-white text-sm md:text-base mb-2">
                Fase Playoffs
            </button>
            <!-- TAB BARU: Super Match -->
            <button id="tab-super-match" onclick="setActivePhase('Super Match')" class="px-3 md:px-6 py-2 rounded-lg font-bold transition duration-200 border-2 border-gray-600 bg-gray-800 text-gray-300 shadow-lg hover:bg-gray-700 hover:text-white text-sm md:text-base mb-2">
                Super Match
            </button>
        </div>

        <!-- Tournament Content Container -->
        <div id="bracket-container">
            <!-- Content will be generated here by JavaScript -->
        </div>

    </div>

    <!-- Custom Modal Structure (Popup for Klasemen) -->
    <div id="klasemen-modal" class="modal-overlay fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-lg modal-content-container transform transition-all duration-300 scale-95 modal-content">
            <h3 id="modal-title" class="text-2xl font-bold text-red-400 mb-4 border-b pb-2 border-gray-700"></h3>
            
            <!-- Konten Klasemen akan dirender di sini -->
            <div id="klasemen-content">
                <!-- Tabel Klasemen akan dimasukkan di sini oleh JavaScript -->
            </div>

            <button onclick="closeModal()" class="mt-6 w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 rounded-lg transition duration-200 shadow-lg">
                Tutup
            </button>
        </div>
    </div>
    
    <!-- FOOTER HAK CIPTA -->
    <footer class="mt-12 py-4 border-t border-gray-700 text-center bg-gray-900 bg-opacity-75">
        <p class="text-sm text-gray-500 font-medium">
            &copy; 2025 Jakastra Official. Semua Hak Cipta Dilindungi.
        </p>
    </footer>
    <!-- AKHIR FOOTER HAK CIPTA -->

    <script>
        // Variabel untuk melacak fase yang aktif
        let activePhase = 'Utama'; // Default ke halaman Utama

        // Data Turnamen Berdasarkan Sketsa
        const tournamentData = {
            title: "Tournament MLBB 2025",
            dates: "15 Desember - 18 Desember 2025",
            venue: "Wonosobo, MUARA ENIM (VIA ONLINE)",
            prizePool: "$600,000 IDR",
            // Data Juara Musim Lalu
            lastSeasonChampion: "AL-FAIZ GT", // Juara musim lalu
            
            // Data Pertandingan Spesial
            specialMatch: {
                round: "Champion vs Champion",
                match: {
                    id: 8,
                    team1: "Juara Musim Ini", // Placeholder, akan diisi secara dinamis
                    team2: "AL-FAIZ GT", // Menggunakan Juara Musim Lalu
                    score1: 0,
                    score2: 0,
                    winner: "",
                    date: "1 Januari 2026",
                    status: "Upcoming",
                    bo: 7
                }
            },
            
            // Menggunakan 12 tim untuk 4 Grup (3 tim per grup) agar sesuai dengan Babak Eliminasi 8 tim (Quarterfinals)
            teams: [
                "Grup 1", "Grup 2", "Grup 3", 
                "Grup 4", "Grup 5", "Grup 6",
                "Grup 7", "Grup 8", "Grup 9",
                "Grup 10", "Grup 11", "Grup 12",
            ],
            groups: [
                // Data Fase Grup (4 Grup, 3 tim per grup). Top 2 dari setiap grup lolos ke Quarterfinals (8 tim)
                {
                    name: "Grup A",
                    matches: [
                        { team1: "Grup 1", team2: "Grup 2", date: "22 Des", status: "Upcoming" }, // Diperbaiki ke G besar
                        { team1: "Grup 2", team2: "Grup 3", date: "22 Des", status: "Upcoming" }, // Diperbaiki ke G besar
                        { team1: "Grup 3", team2: "Grup 1", date: "23 Des", status: "Upcoming" } // Diperbaiki ke G besar
                    ],
                    klasemen: [
                        { team: "Grup 1", points: 2, wins: 2, losses: 0 }, // Diperbaiki ke G besar
                        { team: "Grup 2", points: 1, wins: 1, losses: 2 }, // Diperbaiki ke G besar
                        { team: "Grup 3", points: 0, wins: 0, losses: 4 } // Diperbaiki ke G besar
                    ]
                },
                {
                    name: "Grup B",
                    matches: [
                        { team1: "Grup 4", team2: "Grup 6", date: "23 Des", status: "Upcoming" }, // Diperbaiki ke G besar
                        { team1: "Grup 5", team2: "Grup 5", date: "24 Des", status: "Upcoming" }, // Diperbaiki ke G besar
                        { team1: "Grup 6", team2: "Grup 4", date: "24 Des", status: "Upcoming" } // Diperbaiki ke G besar
                    ],
                    klasemen: [
                        { team: "Grup 4", points: 0, wins: 0, losses: 4 }, // Diperbaiki ke G besar
                        { team: "Grup 5", points: 1, wins: 1, losses: 0 }, // Diperbaiki ke G besar
                        { team: "Grup 6", points: 2, wins: 2, losses: 0 } // Diperbaiki ke G besar
                    ]
                },
                {
                    name: "Grup C",
                    matches: [
                        { team1: "Grup 7", team2: "Grup 9", date: "25 Des", status: "Upcoming" }, // Diperbaiki ke G besar
                        { team1: "Grup 8", team2: "Grup 8", date: "25 Des", status: "Upcoming" }, // Diperbaiki ke G besar
                        { team1: "Grup 9", team2: "Grup 7", date: "26 Des", status: "Upcoming" } // Diperbaiki ke G besar
                    ],
                    klasemen: [
                        { team: "Grup 7", points: 0, wins: 0, losses: 0 },
                        { team: "Grup 8", points: 0, wins: 0, losses: 0 },
                        { team: "Grup 9", points: 0, wins: 0, losses: 0 }
                    ]
                },
                {
                    name: "Grup D",
                    matches: [
                        { team1: "Grup 10", team2: "Grup 12", date: "26 Des", status: "Upcoming" }, // Diperbaiki ke G besar
                        { team1: "Grup 11", team2: "Grup 11", date: "27 Des", status: "Upcoming" }, // Diperbaiki ke G besar
                        { team1: "Grup 12", team2: "Grup 10", date: "27 Des", status: "Upcoming" } // Diperbaiki ke G besar
                    ],
                    klasemen: [
                        { team: "Grup 10", points: 0, wins: 0, losses: 0 },
                        { team: "Grup 11", points: 0, wins: 0, losses: 0 },
                        { team: "Grup 12", points: 0, wins: 0, losses: 0 }
                    ]
                }
            ],
            // Data untuk Fase Playoffs (Single Elimination Bracket - 8 Tim)
            playoffMatches: [
                {
                    round: "Quarterfinals (8 Besar)",
                    matches: [
                        // QF 1: Juara Grup A vs Runner Up Grup C
                        { id: 1, team1: "Grup A #1", team2: "Grup C #2", score1: 0, score2: 0, winner: "", date: "28 Des", status: "Upcoming", bo: 5 },
                        // QF 2: Juara Grup B vs Runner Up Grup D
                        { id: 2, team1: "Grup B #1", team2: "Grup D #2", score1: 0, score2: 0, winner: "", date: "28 Des", status: "Upcoming", bo: 5 },
                        // QF 3: Juara Grup C vs Runner Up Grup A
                        { id: 3, team1: "Grup C #1", team2: "Grup A #2", score1: 0, score2: 0, winner: "", date: "29 Des", status: "Upcoming", bo: 5 },
                        // QF 4: Juara Grup D vs Runner Up Grup B
                        { id: 4, team1: "Grup D #1", team2: "Grup B #2", score1: 0, score2: 0, winner: "", date: "29 Des", status: "Upcoming", bo: 5 },
                    ]
                },
                {
                    round: "Semifinals (4 Besar)",
                    matches: [
                        { id: 5, team1: "Pemenang QF 1", team2: "Pemenang QF 2", score1: 0, score2: 0, winner: "", date: "30 Des", status: "Upcoming", bo: 5 },
                        { id: 6, team1: "Pemenang QF 3", team2: "Pemenang QF 4", score1: 0, score2: 0, winner: "", date: "30 Des", status: "Upcoming", bo: 5 }
                    ]
                },
                {
                    round: "Final (Juara)",
                    // MENGATUR STATUS 'Completed' DAN 'winner' UNTUK MENGUJI TAMPILAN 'Super Match'
                    // Final diatur seolah-olah sudah selesai dengan Juara Musim Ini adalah Pemenang SF 1
                    matches: [
                        { id: 7, team1: "Grup 1", team2: "Grup 2", score1: 2, score2: 0, winner: "Grup 1", date: "31 Des", status: "Completed", bo: 7 } // Final diisi placeholder yang lengkap untuk mengaktifkan Super Match
                    ]
                }
            ]
        };

        // --- FUNGSI HALAMAN UTAMA (HOME) ---
        
        function renderHome() {
            const container = document.getElementById('bracket-container');
            container.innerHTML = `
                <div class="bg-gray-800 p-8 md:p-12 rounded-xl shadow-2xl border-t-4 border-red-600 max-w-3xl mx-auto bg-opacity-90">
                    <h2 class="text-3xl font-extrabold text-red-400 mb-6 border-b pb-3 border-gray-700 text-center">
                        Selamat Datang di ${tournamentData.title}
                    </h2>
                    
                    <div class="space-y-6 text-lg">
                        <div class="flex items-center p-4 bg-gray-700 rounded-lg shadow-inner bg-opacity-90">
                            <span class="text-3xl mr-4 text-green-400">üí∞</span>
                            <div>
                                <p class="font-semibold text-gray-400">Total Hadiah (Prize Pool)</p>
                                <p class="text-2xl font-bold text-yellow-400">${tournamentData.prizePool}</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center p-4 bg-gray-700 rounded-lg shadow-inner bg-opacity-90">
                            <span class="text-3xl mr-4 text-blue-400">üìÖ</span>
                            <div>
                                <p class="font-semibold text-gray-400">Tanggal Turnamen</p>
                                <p class="text-xl font-bold text-white">${tournamentData.dates}</p>
                            </div>
                        </div>

                        <div class="flex items-center p-4 bg-gray-700 rounded-lg shadow-inner bg-opacity-90">
                            <span class="text-3xl mr-4 text-purple-400">üìç</span>
                            <div>
                                <p class="font-semibold text-gray-400">Lokasi Utama</p>
                                <p class="text-xl font-bold text-white">${tournamentData.venue}</p>
                            </div>
                        </div>

                        <div class="p-4 bg-gray-700 rounded-lg shadow-inner bg-opacity-90">
                            <p class="font-semibold text-gray-400 mb-2">Format Turnamen</p>
                            <ul class="list-disc list-inside text-gray-300 ml-4 space-y-1">
                                <li>Start: 12 Tim dibagi menjadi 4 grup (A, B, C, D).</li>
                                <li>Fase Grup: Semua tim bermain Round Robin (BO2).</li>
                                <li>Lolos: 8 Tim (Juara dan Runner-up setiap grup) melangkah ke Playoffs.</li>
                                <li>Playoffs: Dimulai dari Quarter Final (BO5), Semi Final (BO5), hingga Grand Final (BO7).</li>
                                <li>Finish: Pemenang Grand Final menjadi Juara Turnamen.</li>
                            </ul>
                        </div>
                        
                        <div class="p-4 bg-gray-700 rounded-lg shadow-inner bg-opacity-90">
                            <p class="font-semibold text-gray-400 mb-2">Laga Super</p>
                            <p class="text-gray-300">
                                Juara Turnamen Musim Ini akan bertanding melawan Juara Musim Lalu (${tournamentData.lastSeasonChampion}) dalam Best of ${tournamentData.specialMatch.match.bo}.
                            </p>
                        </div>
                    </div>

                    <p class="text-center text-gray-400 mt-8 italic">
                        12 Tim terbaik dari seluruh dunia bersaing untuk memperebutkan gelar juara Mobile Legends.
                    </p>
                </div>
            `;
        }

        // --- FUNGSI HALAMAN TIM (TEAMS) ---
        
        function renderTeams() {
            const container = document.getElementById('bracket-container');
            
            // Membuat peta (Map) untuk mempermudah pencarian Grup berdasarkan Nama Tim
            const teamGroupMap = new Map();
            tournamentData.groups.forEach(group => {
                group.klasemen.forEach(teamData => {
                    // Pastikan tim dipetakan dengan nama yang konsisten (seperti di array teams)
                    teamGroupMap.set(teamData.team, group.name);
                });
            });

            // Mapping semua tim ke dalam HTML
            let teamsHtml = tournamentData.teams.map(teamName => {
                // Mendapatkan inisial tim untuk logo placeholder
                const initials = teamName.split(' ').map(n => n[0]).join('');

                // Mendapatkan nama grup menggunakan Map yang sudah dibuat
                const groupName = teamGroupMap.get(teamName) || 'N/A'; // Default ke 'N/A' jika tidak ditemukan
                
                return `
                    <div class="flex items-center bg-gray-800 p-4 rounded-lg shadow-lg border border-gray-700 hover:border-red-500 transition duration-200 bg-opacity-90">
                        <!-- Logo Placeholder -->
                        <div class="team-logo">${initials}</div>
                        
                        <div class="flex-grow">
                            <p class="text-xl font-bold text-white">${teamName}</p>
                            <p class="text-sm text-gray-400">Grup: <span class="font-semibold ${groupName !== 'N/A' ? 'text-red-300' : 'text-gray-500'}">${groupName}</span></p>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = `
                <div class="bg-gray-800 p-6 rounded-xl shadow-2xl border-t-4 border-red-600 max-w-4xl mx-auto bg-opacity-90">
                    <h2 class="text-3xl font-bold text-red-400 mb-6 border-b pb-3 border-gray-700">Daftar Tim Peserta (${tournamentData.teams.length} Tim)</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${teamsHtml}
                    </div>
                </div>
            `;
        }


        // --- FUNGSI KLASMEN & MODAL ---
        
        // Cek apakah data klasemen untuk satu grup masih kosong (semua 0)
        function isKlasemenEmpty(klasemenData) {
            // Jika ada SATU SAJA tim yang memiliki poin, kemenangan, ATAU kekalahan > 0, maka klasemen TIDAK kosong
            return klasemenData.every(team => 
                team.points === 0 && team.wins === 0 && team.losses === 0
            );
        }

        // FUNGSI BARU: Cek apakah Fase Grup benar-benar sudah selesai (minimal ada data yang masuk)
        function isGroupPhaseComplete() {
            // Jika ada SATU SAJA grup yang klasemennya masih kosong, maka Fase Grup belum selesai
            // Karena sekarang ada data, saya ubah logikanya menjadi: apakah semua grup memiliki pemenang?
            // Untuk simulasi, kita cek apakah ada data yang masuk (tidak semua 0)
            return tournamentData.groups.every(group => !isKlasemenEmpty(group.klasemen));
        }

        function sortKlasemen(data) {
            return data.sort((a, b) => {
                if (b.points !== a.points) {
                    return b.points - a.points;
                }
                return b.wins - a.wins;
            });
        }

        function renderKlasemen(klasemenData) {
            const sortedData = sortKlasemen(klasemenData);
            
            let tableHtml = `
                <div class="overflow-x-auto rounded-lg border border-gray-700 shadow-lg">
                    <table class="min-w-full divide-y divide-gray-700">
                        <thead class="bg-gray-700">
                            <tr>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider w-1/12">#</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider w-6/12">Tim</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider">Poin</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider">W</th>
                                <th class="px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider">L</th>
                            </tr>
                        </thead>
                        <tbody class="bg-gray-800 divide-y divide-gray-700">
            `;

            sortedData.forEach((item, index) => {
                const rank = index + 1;
                // Top 2 tim lolos ke babak Eliminasi (Quarterfinals)
                const isQualified = rank <= 2; 
                const rowClasses = isQualified ? 'bg-green-900/40 hover:bg-green-900/60' : 'hover:bg-gray-700';

                tableHtml += `
                    <tr class="${rowClasses} transition duration-150">
                        <td class="px-4 py-3 whitespace-nowrap text-sm font-semibold ${isQualified ? 'text-green-300' : 'text-gray-400'}">${rank}</td>
                        <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-white">
                            ${isQualified ? '<span class="text-green-400 mr-2">‚òÖ</span>' : ''}${item.team}
                        </td>
                        <td class="px-4 py-3 whitespace-nowrap text-sm text-center font-bold text-red-400">${item.points}</td>
                        <td class="px-4 py-3 whitespace-nowrap text-sm text-center text-green-400">${item.wins}</td>
                        <td class="px-4 py-3 whitespace-nowrap text-sm text-center text-red-400">${item.losses}</td>
                    </tr>
                `;
            });

            tableHtml += `
                        </tbody>
                    </table>
                </div>
            `;
            return tableHtml;
        }

        function showModal(groupName) {
            const group = tournamentData.groups.find(g => g.name === groupName);
            
            if (!group) return;

            const modal = document.getElementById('klasemen-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('klasemen-content');
            
            title.textContent = `Klasemen ${groupName}`;
            
            if (isKlasemenEmpty(group.klasemen)) {
                content.innerHTML = `
                    <p class="text-gray-300 mb-6 py-4 text-center border-y border-gray-700">
                        Detail klasemen untuk grup ini akan segera tersedia setelah pertandingan pertama dimulai. Tetap ikuti terus pembaruan terbaru!
                    </p>
                `;
            } else {
                content.innerHTML = renderKlasemen(group.klasemen);
            }

            modal.classList.add('open');
        }

        function closeModal() {
            const modal = document.getElementById('klasemen-modal');
            modal.classList.remove('open');
            // Bersihkan konten modal setelah ditutup (opsional, tapi baik)
            document.getElementById('klasemen-content').innerHTML = '';
        }

        document.getElementById('klasemen-modal').addEventListener('click', function(event) {
            if (event.target.id === 'klasemen-modal') {
                closeModal();
            }
        });


        // --- FUNGSI FASE GRUP ---

        function createMatchHtml(match) {
            let statusClasses = '';
            if (match.status === 'Upcoming') {
                statusClasses = 'bg-yellow-800 text-yellow-300';
            } else if (match.status === 'Completed') {
                statusClasses = 'bg-green-800 text-green-300';
            } else if (match.status === 'Live') {
                statusClasses = 'bg-red-800 text-red-300 animate-pulse';
            }

            return `
                <div class="flex items-center justify-between p-2 rounded-lg border border-gray-700 hover:bg-gray-700 transition duration-200 shadow-md mb-2 bg-opacity-90">
                    <div class="flex flex-col flex-grow space-y-0.5">
                        <!-- Tim 1 -->
                        <div class="flex items-center font-bold text-sm">
                            <span class="w-1.5 h-1.5 bg-red-500 rounded-full mr-2"></span>
                            <span class="truncate">${match.team1}</span>
                        </div>
                        <!-- Tim 2 -->
                        <div class="flex items-center font-bold text-sm">
                            <span class="w-1.5 h-1.5 bg-blue-500 rounded-full mr-2"></span>
                            <span class="truncate">${match.team2}</span>
                        </div>
                    </div>
                    
                    <!-- Detail Waktu/Status -->
                    <div class="text-right ml-4 flex flex-col justify-center items-end flex-shrink-0">
                        <p class="text-xs font-semibold text-gray-400">${match.date}</p>
                        <span class="text-[10px] font-bold uppercase mt-1 px-1.5 py-0.5 rounded ${statusClasses}">
                            ${match.status}
                        </span>
                    </div>
                </div>
            `;
        }

        function createGroupHtml(group) {
            const matchesHtml = group.matches.map(createMatchHtml).join('');

            return `
                <div class="bg-gray-800 p-6 rounded-xl shadow-2xl border-t-4 border-red-600 bg-opacity-90">
                    <h2 class="text-2xl font-bold mb-4 border-b pb-2 border-gray-700 text-red-400">
                        ${group.name}
                    </h2>
                    <div class="space-y-4">
                        ${matchesHtml}
                    </div>
                    <button onclick="showModal('${group.name}')" class="mt-4 w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 rounded-lg transition duration-200 transform hover:scale-[1.01] shadow-lg">
                        Lihat Klasemen
                    </button>
                </div>
            `;
        }
        
        // Fungsi untuk merender Fase Grup
        function renderGroupPhase() {
            const container = document.getElementById('bracket-container');
            // Menggunakan gap-6 untuk tampilan yang lebih padat di mode landscape
            const groupsHtml = tournamentData.groups.map(createGroupHtml).join('');
            container.innerHTML = `<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">${groupsHtml}</div>`;
        }


        // --- FUNGSI FASE PLAYOFFS BARU (SINGLE ELIMINATION) ---

        // Helper untuk merender satu kotak pertandingan di Playoffs
        function createPlayoffMatchHtml(match) {
            const isCompleted = match.status === 'Completed';
            const winnerClass1 = isCompleted && match.winner === match.team1 ? 'text-green-400 font-extrabold' : 'text-white';
            const winnerClass2 = isCompleted && match.winner === match.team2 ? 'text-green-400 font-extrabold' : 'text-white';
            
            // Tentukan status badge
            let statusBadge = '';
            let statusText = match.status;
            let statusBg = 'bg-gray-700 text-gray-400';

            if (match.status === 'Completed') {
                statusBg = 'bg-green-700 text-white';
                statusText = 'Selesai';
            } else if (match.status === 'Upcoming') {
                statusBg = 'bg-yellow-700 text-white';
                statusText = 'Mendatang';
            }

            statusBadge = `<span class="text-xs font-medium uppercase px-2 py-0.5 rounded ${statusBg}">${statusText} - BO${match.bo}</span>`;


            return `
                <div class="match-box bg-opacity-90">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-sm font-medium text-gray-400">${match.date}</span>
                        ${statusBadge}
                    </div>
                    <div class="space-y-1">
                        <!-- Tim 1 -->
                        <div class="match-team ${winnerClass1}">
                            <span class="truncate">${match.team1}</span>
                            <span class="match-score">${match.score1}</span>
                        </div>
                        <div class="border-t border-gray-700 pt-1"></div>
                        <!-- Tim 2 -->
                        <div class="match-team ${winnerClass2}">
                            <span class="truncate">${match.team2}</span>
                            <span class="match-score">${match.score2}</span>
                        </div>
                    </div>
                    ${isCompleted ? `<p class="mt-2 text-xs text-right text-green-400 font-bold">Pemenang: ${match.winner}</p>` : ''}
                </div>
            `;
        }

        // Fungsi untuk merender Fase Playoffs (Single Elimination Bracket)
        function renderPlayoffs() {
            const container = document.getElementById('bracket-container');
            
            // Cek status fase grup. Jika belum selesai (minimal ada data yang masuk di setiap grup), tampilkan pesan
            if (!isGroupPhaseComplete()) {
                 container.innerHTML = `
                    <div class="bg-gray-800 p-8 rounded-xl shadow-2xl border-t-4 border-yellow-600 max-w-lg mx-auto bg-opacity-90 text-center">
                        <span class="text-6xl text-yellow-400 mb-4 inline-block">üîí</span>
                        <h3 class="text-2xl font-bold text-yellow-400 mb-2">Akses Terkunci</h3>
                        <p class="text-white mb-4">
                            Fase Playoffs akan dibuka setelah seluruh pertandingan Fase Grup selesai dan 8 tim yang lolos telah dikonfirmasi.
                        </p>
                        <p class="text-sm text-gray-400">
                            Silakan cek tab "Fase Grup" untuk detail pertandingan yang akan datang.
                        </p>
                    </div>
                `;
                return;
            }


            // Mengubah ke grid 3 kolom untuk tampilan progresif (QF -> SF -> Final)
            let playoffsHtml = `<div class="lg:grid lg:grid-cols-3 lg:gap-6 overflow-x-auto p-4 w-full">`;
            
            // Filter match data
            const quarterfinals = tournamentData.playoffMatches.find(r => r.round.includes("Quarterfinals"));
            const semifinals = tournamentData.playoffMatches.find(r => r.round.includes("Semifinals"));
            const final = tournamentData.playoffMatches.find(r => r.round.includes("Final"));

            // KOLOM 1: Quarterfinals (8 Besar)
            playoffsHtml += `
                <div class="min-w-[300px] mb-8 lg:mb-0 lg:pr-6 lg:border-r-2 border-gray-700">
                    <h3 class="text-2xl font-bold mb-4 text-red-400 border-b border-gray-700 pb-2">Babak Eliminasi Utama</h3>
                    
                    <p class="text-lg font-semibold text-gray-300 mb-4">${quarterfinals.round}</p>
                    ${quarterfinals.matches.map(createPlayoffMatchHtml).join('')}
                </div>
            `;
            
            // KOLOM 2: Semifinals (4 Besar)
            playoffsHtml += `
                <div class="min-w-[300px] mb-8 lg:mb-0 lg:px-6 lg:border-r-2 border-gray-700">
                    <h3 class="text-2xl font-bold mb-4 text-red-400 border-b border-gray-700 pb-2">Jalur Menuju Final</h3>
                    
                    <p class="text-lg font-semibold text-gray-300 mb-4">${semifinals.round}</p>
                    ${semifinals.matches.map(createPlayoffMatchHtml).join('')}
                </div>
            `;

            // KOLOM 3: Grand Final
            playoffsHtml += `
                <div class="min-w-[300px] lg:pl-6">
                    <h3 class="text-2xl font-bold mb-4 text-red-400 border-b border-gray-700 pb-2">Laga Puncak</h3>
                    <p class="text-lg font-semibold text-gray-300 mb-4">${final.round}</p>
                    ${final.matches.map(createPlayoffMatchHtml).join('')}
                </div>
            `;
            
            playoffsHtml += `</div>`;
            container.innerHTML = playoffsHtml;
        }

        // --- FUNGSI HALAMAN SUPER MATCH YANG DIRAPIKAN ---
        
        function renderSuperMatch() {
            const container = document.getElementById('bracket-container');
            const specialMatchData = tournamentData.specialMatch.match;
            const finalMatch = tournamentData.playoffMatches.find(r => r.round.includes("Final")).matches[0];

            // Dapatkan pemenang musim ini (jika sudah ada)
            let currentSeasonWinner = finalMatch.winner;
            
            // Jika final belum selesai, gunakan placeholder TBD
            if (finalMatch.status !== 'Completed' || !currentSeasonWinner || currentSeasonWinner === "?") {
                currentSeasonWinner = "TBD";
            }

            // Perbarui detail pertandingan spesial
            specialMatchData.team1 = currentSeasonWinner;
            specialMatchData.team2 = tournamentData.lastSeasonChampion; // Pastikan menggunakan Juara Musim Lalu yang baru

            // Tentukan kelas CSS untuk Juara Musim Ini
            const currentWinnerClass = currentSeasonWinner === "TBD" 
                ? 'text-gray-400 font-medium' 
                : 'text-yellow-400 font-extrabold text-2xl md:text-3xl';
            
            // Tentukan status badge untuk Super Match
            let statusText = specialMatchData.status === 'Upcoming' ? 'Segera Hadir' : 'Selesai';
            let statusBg = specialMatchData.status === 'Upcoming' ? 'bg-red-700/80' : 'bg-green-700/80';
            
            // Tentukan skor
            const scoreText = specialMatchData.status === 'Completed' 
                ? `${specialMatchData.score1} : ${specialMatchData.score2}` 
                : `BO${specialMatchData.bo}`;
            
            const winnerName = specialMatchData.winner ? specialMatchData.winner : 'BELUM ADA';

            container.innerHTML = `
                <div class="max-w-3xl mx-auto">
                    <!-- Kartu Super Match dengan desain dramatis -->
                    <div class="super-match-card p-6 md:p-10 rounded-xl shadow-2xl bg-opacity-95 text-center">
                        <h2 class="text-3xl md:text-4xl font-extrabold text-red-400 mb-1">
                            LAGA SUPREMASI
                        </h2>
                        <p class="text-xl text-yellow-300 mb-6 font-bold uppercase tracking-wider">
                            Juara Musim Ini vs Juara Musim Lalu
                        </p>
                        
                        <!-- Header Status dan Tanggal (Sudah di-align rata kiri dan rata kanan) -->
                        <div class="flex justify-between items-center text-sm mb-8">
                            <!-- Rata Kiri: Badge Status -->
                            <span class="px-3 py-1 rounded-full text-white font-bold ${statusBg} flex-shrink-0">
                                LAGA SUPREMASI
                            </span>
                            <!-- Rata Kanan: Tanggal -->
                            <span class="text-lg font-semibold text-gray-300 ml-4 flex-grow text-right">
                                üìÖ ${specialMatchData.date}
                            </span>
                        </div>

                        <!-- Panel Pertandingan VS -->
                        <div class="grid grid-cols-3 gap-4 items-center relative">
                            <!-- Team 1 (Juara Musim Ini) -->
                            <div class="team-box-champion p-4 rounded-lg shadow-inner flex flex-col items-center justify-center h-full">
                                <p class="text-sm font-semibold text-gray-400 mb-2">Juara Musim Ini</p>
                                <p class="${currentWinnerClass} uppercase text-shadow">
                                    ${currentSeasonWinner}
                                </p>
                            </div>

                            <!-- VS Emblem -->
                            <div class="flex flex-col items-center justify-center h-full">
                                <span class="text-5xl font-extrabold text-yellow-400 tracking-widest leading-none">VS</span>
                                <span class="text-sm text-gray-400 mt-1">Best of ${specialMatchData.bo}</span>
                            </div>

                            <!-- Team 2 (Juara Musim Lalu) -->
                            <div class="team-box-champion p-4 rounded-lg shadow-inner flex flex-col items-center justify-center h-full">
                                <p class="text-sm font-semibold text-gray-400 mb-2">Juara Musim Lalu</p>
                                <p class="text-yellow-400 font-extrabold text-2xl md:text-3xl uppercase text-shadow">
                                    ${tournamentData.lastSeasonChampion}
                                </p>
                            </div>
                        </div>
                        
                        <!-- Skor / Hasil -->
                        <div class="mt-8 pt-4 border-t border-gray-700">
                            <h3 class="text-xl font-bold text-red-400 mb-3">
                                ${specialMatchData.status === 'Completed' ? 'HASIL AKHIR' : 'FORMAT PERTANDINGAN'}
                            </h3>
                            <div class="bg-gray-700/50 p-3 rounded-lg">
                                <p class="text-4xl font-extrabold text-yellow-300 tracking-wider">
                                    ${scoreText}
                                </p>
                            </div>
                            
                            ${specialMatchData.status === 'Completed' ? `
                                <p class="mt-4 text-lg font-bold text-green-400">Pemenang Supremasi: ${winnerName}</p>
                            ` : `
                                <p class="mt-4 text-md text-gray-300">Juara Musim Ini akan bertanding dengan ${tournamentData.lastSeasonChampion}.</p>
                            `}
                        </div>
                        
                    </div>
                </div>
            `;
        }


        // --- FUNGSI NAVIGASI UTAMA ---

        // Fungsi untuk mengatur fase yang aktif dan merender konten yang sesuai
        function setActivePhase(phase) {
            activePhase = phase;
            const tabs = {
                'Utama': document.getElementById('tab-home'),
                'Tim': document.getElementById('tab-teams'),
                'Fase Grup': document.getElementById('tab-grup'),
                'Fase Playoffs': document.getElementById('tab-playoffs'),
                'Super Match': document.getElementById('tab-super-match') // Tambahkan tab baru
            };
            const titleElement = document.getElementById('current-phase-title');

            // 1. Update tampilan tombol navigasi
            Object.keys(tabs).forEach(key => {
                const button = tabs[key];
                if (key === phase) {
                    // Tombol aktif
                    button.classList.remove('bg-gray-800', 'border-gray-600', 'text-gray-300', 'hover:bg-gray-700', 'hover:text-white');
                    button.classList.add('bg-red-600', 'border-red-600', 'text-white', 'hover:bg-red-700');
                } else {
                    // Tombol non-aktif
                    button.classList.remove('bg-red-600', 'border-red-600', 'text-white', 'hover:bg-red-700');
                    button.classList.add('bg-gray-800', 'border-gray-600', 'text-gray-300', 'hover:bg-gray-700', 'hover:text-white');
                }
            });

            // 2. Update judul fase
            titleElement.textContent = `2025 - ${phase}`;

            // 3. Render konten yang sesuai
            switch (phase) {
                case 'Utama':
                    renderHome();
                    break;
                case 'Tim':
                    renderTeams();
                    break;
                case 'Fase Grup':
                    renderGroupPhase();
                    break;
                case 'Fase Playoffs':
                    renderPlayoffs();
                    break;
                case 'Super Match': // Case baru untuk tab Super Match
                    renderSuperMatch();
                    break;
            }
        }

        // Jalankan fungsi inisialisasi pada saat dokumen dimuat
        document.addEventListener('DOMContentLoaded', () => {
            // Render halaman default (Utama)
            setActivePhase('Utama'); 
        });

    </script>
</body>
</html>